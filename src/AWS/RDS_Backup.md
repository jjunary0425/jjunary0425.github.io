# Backup, 리스토어, 복제

## RDS 백업
- 자동화된 백업
    - 매일 풀 백업 수행
    - 5분마다 트랜잭션 로그 백업
    - 언제라도 5분전으로 복원 가능
    - 자동복업 가능 기간 1 ~ 35일 0일 경우 비활성화

- 수동 디비 스냅샷
    - 사용자가 수동으로 트리거
    - 원하는 기간 동안 유지 가능
    - 자동백업은 만효 수동은 유지 가능

    - 두시간 사용후 스냅샷 만들고 원본디비 삭제할 경우 나중에 복원하더라도 비용 절감

## 오로라 백업
- 자동화된 백업
    - 매일 풀 백업 수행
    - 5분마다 트랜잭션 로그 백업
    - 언제라도 5분전으로 복원 가능
    - 자동복업 가능 기간 1 ~ 35일  비활성화 불가
    - 시점복구 기능 

- 수동 디비 스냅샷
    - 사용자가 수동으로 트리거
    - 원하는 기간 동안 유지 가능


## 리스토어 옵션

스냅샷 또는 백업으로 부터 복원 가능

- RDSMySQL 
    - S3 복원 가능
    - 백업을 만들어 S3에 저장 후 새로운 RDS인스턴스 생성 가능

- AuroraMySQL
    - 백업을 만들때 XtraBackup이용 
    - S3에 저장 후 새로운 RDS인스턴스 생성 가능

## 오로라의 데이터베이스 복제
기존의 데이터 베이스를 복제하여 새로운 데이터 베이스를 생성

- 스냅샷보다 빠르다
- copy on write protocol 사용

## RDS & Aurora Security

- At-rest encryption:
    - AWS KMS를 사용한 데이터베이스 마스터 및 복제본 암호화 – 데이터베이스 생성시 지정 필요
    - 마스터가 암호화되지 않으면 읽기 전용 복제본을 암호화 불가
    - 암호화되지 않은 데이터베이스를 암호화하려면 DB 스냅샷을 거쳐 암호화된 상태로 복원

- In-flightencryption : 기본적으로 TLS 준비, 클라이언트 측 AWSSTLS 루트 인증서 사용

- IAM Authentication : 데이터베이스 접근 전용의 IAM 롤 사용하여 보안을 높임

- 세큐리티 그룹을 이용하여 접근 제어

- 기본적으로 SSH접속불가