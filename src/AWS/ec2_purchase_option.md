# EC2 Instances Purchasing Options

- On-Demand Instances : 단기적이고 중단없는 workload, 예측 가능한 가격, 초 단위 지불
    <br>원할 때마다 리조트에 와서 숙박하며 전액을 지불
- Reserved (1 & 3 years)
    <br>미리 계획하고 장기간 머물 계획이라면 좋은 할인을 받을 수
    - Reserved Instances : long workloads
    - Convertible Reserved Instances : 유연한 인스턴스를 갖춘 long workloads
- Savings Plans (1 & 3 years) : 사용량 약정, long workload 
    <br>특정 기간 동안 시간당 일정 금액을 지불하고 모든 객실 유형(예: 킹, 스위트, 바다 전망 등)에 숙박
- Spot Instances : short workloads,  저렴함, 인스턴스 손실 가능(신뢰성 낮음)
    <br>호텔은 사람들이 빈 객실에 입찰하도록 허용하고 가장 높은 입찰자가 객실을 유지 언제든지 쫓겨날 수 
- Dedicated Hosts : 전체 물리적 서버 예약, 인스턴스 배치 제어
    <br>리조트 건물 전체를 예약
- Dedicated Instances : 다른 고객이 귀하의 하드웨어를 공유하지 X
    <br>숙박하지 않더라도 일정 기간 동안 정가로 객실을 예약
- Capacity Reservations : 특정 기간 동안 특정 AZ의 용량을 예약


## EC2 예약 인스턴스
- 온디맨드 대비 최대 72% 할인
- 특정 인스턴스 속성(인스턴스 유형, 지역, 테넌시, OS)을 예약
- 예약기간 : 1년(+할인) 또는 3년(+++할인)
- 결제 옵션 : 선결제 없음(+), 부분 선결제(++), 전체 선결제(+++) 
- 예약 인스턴스 범위 :  지역 또는 영역(AZ의 예약 용량)
- 안정된 상태의 사용 애플리케이션에 권장됩니다(데이터베이스)
- 예약 인스턴스 마켓플레이스에서 구매 및 판매가 가능
- 전환형 예약 인스턴스
  - EC2 인스턴스 유형, 인스턴스 패밀리, OS, 범위, 테넌시 변경 가능 
  - 최대 66% 할인

## EC2 Savings Plans
- 장기 사용량에 따라 할인(최대 72% - RI와 동일) 
- 특정 유형의 사용량 약정(1년 또는 3년 동안 시간당 $10)
- EC2 Savings Plans를 초과하는 사용량은 온디맨드 가격으로 청구
- 특정 인스턴스 제품군 및 AWS 지역(예: us-east-1의 M5)에 고정
- 유연성:
  - 인스턴스 크기(예: m5.xlarge, m5.2xlarge) 
-  OS(예: Linux, Windows)
-  테넌시(호스트, 전용, 기본)

## EC2 Spot Instances
- 온디맨드 대비 최대 90% 할인 가능
- 최대 가격이 현재 현물 가격보다 낮을 경우 언제든지 "잃을" 수 있는 인스턴스
- AWS에서 가장 비용 효율적인 인스턴스
- 장애에 대한 복원력이 있는 워크로드에 유용
  - 일괄 작업
  - 데이터 분석
  - 이미지 처리
  - 모든 분산 워크로드
  - 시작 및 종료 시간이 유연한 워크로드
- 중요한 작업이나 데이터베이스에는 적합하지 않음

### Spot Fleets

스팟 플릿 = 스팟 인스턴스 세트 + (선택 사항) 온디맨드 인스턴스
- 스팟 플릿은 가격 제약으로 목표 용량을 충족하려고 노력합
- 가능한 실행 풀 정의: 인스턴스 유형(m5.large), OS, 가용 영역
- 플릿 선택할 수 있도록 여러 개의 실행 풀을 가질 수 
- 스팟 플릿은 용량 또는 최대 비용에 도달하면 인스턴스 시작 중지
- 스팟 인스턴스 할당 전략:
  - lowerPrice: 가장 낮은 가격을 가진 풀에서 (비용 최적화, 짧은 작업량)
  - 다양함: 모든 풀에 분산됨(가용성, 긴 작업 부하에 적합)
  - capacityOptimized: 인스턴스 수에 대한 최적의 용량을 갖춘 풀입
  - PriceCapacityOptimized(권장): 사용 가능한 용량이 가장 높은 풀을 선택한 다음 가격이 가장 낮은 풀을 선택(대부분의 워크로드에 가장 적합한 선택)

> 스팟 플릿을 사용하면 최저 가격으로 스팟 인스턴스를 자동으로 요청 가능

## EC2 Dedicated Hosts
- EC2 인스턴스 용량을 고객 전용으로 갖춘 **물리적 서버**
- 규정 준수 요구 사항을 충족하고 기존 서버 기반 소프트웨어 라이센스(소켓당, 코어당, PE—VM 소프트웨어 라이센스)를 사용 가능
- 구매 옵션:
  - On-demand :활성 전용 호스트에 대해 초당 비용 지불
  - Reserved :1년 또는 3년(선결제 없음, 부분 선결제, 전체 선결제)
- 가장 비싼 옵션
- 라이센스 모델이 복잡한 소프트웨어에 유용(BYOL : 자체 라이센스 사용)
- 또는 강력한 규제 또는 규정 준수 요구 사항이 있는 기업의 경우

## EC2 Dedicated Instances

- 인스턴스는 **사용자 전용 하드웨어**에서 실행
- 동일한 계정의 다른 인스턴스와 하드웨어를 공유 가능
- 인스턴스 배치를 제어할 수 없음(중지/시작 후 하드웨어 이동 가능)

## EC2 Capacity Reservations

특정 AZ에 온디맨드 인스턴스 용량을 예약하여 지속
- 필요할 때 언제든지 EC2 용량에 액세스 가능
- 시간 약정 없음(언제든지 생성/취소), 결제 할인 없음
- 지역 예약 인스턴스 및 Savings Plan과 결합하여 결제 할인 혜택
- 인스턴스 실행 여부에 관계없이 온디맨드 요금이 청구
- 특정 AZ에 있어야하는 단기적이고 중단 없는 워크로드에 적합

